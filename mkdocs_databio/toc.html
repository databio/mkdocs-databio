<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary pre_scrollable">
    <ul class="level1">
    {%- for nav_item in nav %}
    {%- if nav_item.children %}
        <li>
            <h4 class="navhead">{{ nav_item.title }}</h4>
            <ul class="nav flex-column bs-sidenav level2">
            {%- for nav_item in nav_item.children %}
                <li class="nav-item">
                       <a href="{{ nav_item.url|url }}">{{ nav_item.title }}</a>
                </li>
                    {% if page.title == nav_item.title %}
                        <ul class="level3">
                        {% if page.toc|length > 0 %}
                        {%- for toc_item in page.toc %}
                            {%- for toc_item in toc_item.children %}
                                <li class="nav-item">
                                    <span class="fa fa-chevron-right" style="font-size:80%"></span> <a href="{{ toc_item.url }}" class="nav-link{% if toc_item.active %} active{% endif %}">{{ toc_item.title }}</a>
                                </li>
                            {%- endfor %}
                        {%- endfor %}
                        {% endif %}
                        </ul>
                    {% endif %}
            {%- endfor %}
            </ul>
        </li>
    {%- else %}
        <li class="navitem{% if nav_item.active %} active{% endif %}">
            <a href="{{ nav_item.url|url }}" class="nav-link">{{ nav_item.title }}</a>
        </li>
    {%- endif %}
    {%- endfor %}
    </ul>

    </div>
</div>
